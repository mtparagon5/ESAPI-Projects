<UserControl x:Class="OptiAssistant.MainControl"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VMS.TPS"
        mc:Ignorable="d"
        Height="auto" Width="auto" Background="#E1E1E1" FontFamily="Lucida Sans" FontWeight="Thin" FontStretch="ExtraExpanded" FontSize="15">

  <!--Styles-->
  <UserControl.Resources>
    <Style x:Key="BlueRoundButtonTemplate" TargetType="Button">
      <Setter Property="Foreground" Value="White"></Setter>
      <Setter Property="Background" Value="#003E6B"></Setter>
      <Setter Property="Cursor" Value="Hand"></Setter>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border CornerRadius="12"
                    Background="{TemplateBinding Background}"
                    BorderThickness="1">
              <ContentPresenter HorizontalAlignment="Center" 
                                VerticalAlignment="Center" 
                                Margin="{TemplateBinding Padding}">
              </ContentPresenter>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
      <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
          <Setter Property="Background" Value="#0F609B"/>
        </Trigger>
      </Style.Triggers>
    </Style>

    <Style x:Key="BlueComboBox" TargetType="{x:Type ComboBoxItem}">
      <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#0F609B"/>
      </Style.Resources>

      <Setter Property="Background" Value="#0A558C"/>
      <Setter Property="BorderBrush" Value="#0A558C"/>

      <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="true">
          <Setter Property="BorderBrush" Value="#0F609B" />
          <Setter Property="BorderThickness" Value="1" />
        </Trigger>
      </Style.Triggers>
    </Style>

    <Style x:Key="GreenCheckMark" TargetType="{x:Type CheckBox}">
      
      <Setter Property="Cursor" Value="Hand"></Setter>

      <Setter Property="OverridesDefaultStyle"
          Value="true" />

      <Setter Property="Template">
        <Setter.Value>

          <ControlTemplate TargetType="CheckBox">
            <BulletDecorator Background="Transparent">
              <BulletDecorator.Bullet>
                <Border x:Name="Border"
                    Width="13"
                    Height="13"
                    CornerRadius="0"
                    BorderThickness="0">

                  <Grid>
                    <Path Visibility="Collapsed"
                      Width="10"
                      Height="10"
                      x:Name="CheckMark"
                      SnapsToDevicePixels="False"
                      StrokeThickness="2"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Bottom"
                          
                      Data="M 0 3.5 L 5 7 M 3.8 7 L 9 0">
                      <Path.Stroke>
                        <SolidColorBrush Color="Green" />
                      </Path.Stroke>
                    </Path>
                    <Path Visibility="Collapsed"
                      Width="7"
                      Height="7"
                      x:Name="InderminateMark"
                      SnapsToDevicePixels="False"
                      StrokeThickness="2"
                      Data="M 0 7 L 7 0">
                      <Path.Stroke>
                        <SolidColorBrush Color="Blue" />
                      </Path.Stroke>
                    </Path>
                  </Grid>
                </Border>
              </BulletDecorator.Bullet>
              <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="CommonStates">
                  <VisualState x:Name="Normal" />
                  <VisualState x:Name="MouseOver"/>
                  <VisualState x:Name="Pressed" />
                  <VisualState x:Name="Disabled" />
                </VisualStateGroup>
                <VisualStateGroup x:Name="CheckStates">
                  <VisualState x:Name="Checked">
                    <Storyboard>
                      <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)"
                                                 Storyboard.TargetName="CheckMark">
                        <DiscreteObjectKeyFrame KeyTime="0"
                                            Value="{x:Static Visibility.Visible}" />
                      </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                  </VisualState>
                  <VisualState x:Name="Unchecked" />
                  <VisualState x:Name="Indeterminate">
                    <Storyboard>
                      <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)"
                                                 Storyboard.TargetName="InderminateMark">
                        <DiscreteObjectKeyFrame KeyTime="0"
                                            Value="{x:Static Visibility.Visible}" />
                      </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                  </VisualState>
                </VisualStateGroup>
              </VisualStateManager.VisualStateGroups>
              <ContentPresenter Margin="4,0,0,0"
                            VerticalAlignment="Center"
                            HorizontalAlignment="Left"
                            RecognizesAccessKey="True" />
            </BulletDecorator>
          </ControlTemplate>

        </Setter.Value>

      </Setter>

      <Style.Triggers>

        <Trigger Property="IsMouseOver" Value="true">
          <Setter Property="FontStyle" Value="Italic"/>
        </Trigger>

        <Trigger Property="IsEnabled" Value="False">
          <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
          <Setter Property="FontStyle" Value="Italic"/>
        </Trigger>
      </Style.Triggers>

    </Style>

    <Style x:Key="{x:Type ScrollBar}" TargetType="{x:Type ScrollBar}">
      <Setter Property="Stylus.IsFlicksEnabled" Value="True" />
      <Style.Triggers>
        <Trigger Property="Orientation" Value="Horizontal">
          <Setter Property="Height" Value="10" />
          <Setter Property="MinHeight" Value="10" />
        </Trigger>
        <Trigger Property="Orientation" Value="Vertical">
          <Setter Property="Width" Value="10" />
          <Setter Property="MinWidth" Value="10" />
        </Trigger>
      </Style.Triggers>
    </Style>

  </UserControl.Resources>
  
  <!--Main-->
  <Border CornerRadius="2" BorderBrush="#003E6B" BorderThickness="3" Margin="5">
    <Grid>
        <StackPanel>

          <!--Heading-->
          <StackPanel Background="#003E6B"
                  VerticalAlignment="Top">
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>

              <Label  Grid.Column="1"
                    Content="Opti Assistant"
                    Foreground="White"
                    Background="Transparent"
                    BorderThickness="0"
                    FontSize="15"
                    VerticalContentAlignment="Center"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"/>
              <Button Grid.Column="2"
                    x:Name="Instructions_Button"
                    Content="Show Instructions"
                    Click="Instructions_Button_Click"
                    Foreground="White"
                    Background="Transparent"
                    BorderThickness="0"
                    FontSize="12"
                    Margin="0,2,8,2"
                    VerticalContentAlignment="Center"
                    VerticalAlignment="Center"
                    HorizontalAlignment="right"
                    Cursor="Help"/>
            </Grid>
          </StackPanel>


          <ScrollViewer CanContentScroll="True" MaxHeight="850" Width="1250" MaxWidth="1250" VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Visible">

            <!-- main panel -->
            <StackPanel Orientation="Vertical"
                    HorizontalAlignment="Center">

              <!--Tool Selections-->
              <StackPanel Orientation="Vertical"
                      VerticalAlignment="Center"
                      Margin="10">
                <!-- row 1 -->
                <Border Padding="10"
                      CornerRadius="10"
                      BorderThickness="1"
                      BorderBrush="#003E6B">

                  <StackPanel Orientation="Horizontal"
                        Margin="5"
                        HorizontalAlignment="Center"
                          Background="White">

                    <Label Content="What would you like to create/do?"
                      VerticalAlignment="Center"
                      Margin="5,0,15,0"/>

                    <CheckBox Content="Avoid Structures"
                        VerticalAlignment="Center"
                        VerticalContentAlignment="Bottom"
                        Margin="15,0"
                        x:Name="CreateAvoids_CB"
                        Click="CreateAvoids_CB_Click"
                        Style="{StaticResource GreenCheckMark}"
                        IsChecked="False"/>
                    <CheckBox Content="Opti Structures"
                        VerticalAlignment="Center"
                        VerticalContentAlignment="Bottom"
                        Margin="15, 0"
                        x:Name="CreateOptis_CB"
                        Click="CreateOptis_CB_Click"
                        Style="{StaticResource GreenCheckMark}"
                        IsChecked="False"/>
                    <CheckBox Content="Ring Structures"
                        VerticalAlignment="Center"
                        Margin="15,0"
                        VerticalContentAlignment="Bottom"
                        x:Name="CreateRings_CB"
                        Click="CreateRingss_CB_Click"
                        Style="{StaticResource GreenCheckMark}"
                        IsChecked="False"/>
                    <CheckBox Content="Booleaned Structures"
                        VerticalAlignment="Center"
                        Margin="15,0"
                        VerticalContentAlignment="Bottom"
                        x:Name="CreateBoolean_CB"
                        Click="CreateBoolean_CB_Click"
                        Style="{StaticResource GreenCheckMark}"
                        IsChecked="False"/>

                    <CheckBox Content="Approximate Overlap"
                          VerticalAlignment="Center"
                          Margin="15,0,10,0"
                          VerticalContentAlignment="Bottom"
                          x:Name="ApproxOverlap_CB"
                          Click="ApproxOverlap_CB_Click"
                          Style="{StaticResource GreenCheckMark}"
                          IsChecked="False"/>

                </StackPanel>

                </Border>

                <!-- row 2 -->
                <StackPanel Orientation="Horizontal" 
                        Margin="0,5"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center">

                  <!-- oar avoids -->
                  <Border Padding="10"
                      CornerRadius="10"
                      BorderThickness="1"
                      BorderBrush="#003E6B"
                      Margin="0,0,5,0"
                      x:Name="AvoidanceStructure_SP"
                      Visibility="Collapsed">


                    <StackPanel Background="#E1E1E1">

                      <!--OAR Selection-->
                      <StackPanel Orientation="Horizontal"
                          Background="White"
                          Margin="0,5,0,5">

                        <StackPanel Width="350">
                          <StackPanel>
                            <Label x:Name="OarAvoid_Label"
                            Content="OAR Avoids To Create"
                            HorizontalAlignment="Center"
                            />
                            <TextBlock Text="Select the OAR(s) you'd like to create avoidance structures for:"
                              TextWrapping="Wrap"
                              FontSize="12"
                              FontStyle="Italic"
                              HorizontalAlignment="Center"
                              />
                            <ListBox x:Name="OarList_LV"
                              Margin="5"
                              Width="auto"
                              MinHeight="150"
                              MaxHeight="150"
                              FontSize="13"
                              ItemsSource="{Binding oarListBoxItems}"
                              SelectionMode="Multiple" 
                              Height="auto" 
                              HorizontalContentAlignment="Center"
                              VerticalContentAlignment="Center"
                              BorderBrush="White">
                              <ListBox.Resources>
                                <Style TargetType="ListBoxItem">
                                  <Setter Property="OverridesDefaultStyle" Value="true" />
                                  <Setter Property="SnapsToDevicePixels" Value="true" />
                                  <Setter Property="HorizontalAlignment" Value="Left" />
                                  <Setter Property="Margin" Value="50,0,20,0" />
                                  <Setter Property="Template">
                                    <Setter.Value>
                                      <ControlTemplate TargetType="ListBoxItem">
                                        <CheckBox IsChecked="{Binding IsSelected}"
                                        Style="{StaticResource GreenCheckMark}"
                                        Margin="5,2"
                                                  Width="150">
                                        <TextBlock Text="{Binding Id}"></TextBlock>
                                      </CheckBox>

                                      </ControlTemplate>
                                    </Setter.Value>
                                  </Setter>
                                </Style>
                              </ListBox.Resources>
                            </ListBox>
                          </StackPanel>
                        </StackPanel>
                      </StackPanel>

                      <!--Options-->
                      <StackPanel Orientation="Horizontal"
                                Background="White"
                                Margin="0,5,0,5">

                        <Grid>
                          <Grid.RowDefinitions>
                            <RowDefinition />
                          </Grid.RowDefinitions>

                        <ScrollViewer CanContentScroll="True" MinHeight="400"  MaxHeight="400" >

                            <StackPanel Width="350">
                              <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">
                                <Label Content="Options"
                              VerticalAlignment="Center"
                              FontSize="14"
                              />
                              </StackPanel>
                              <Label Content="____________________________________________________________________________"
                            Margin="0,-20,0,0"
                            HorizontalAlignment="Center"
                            VerticalContentAlignment="Top"
                            FontSize="14"
                            />

                              <!--Which Targets-->
                              <StackPanel>

                                <!--Checkboxes For Avoid Targets-->
                                <StackPanel Orientation="Vertical"
                                HorizontalAlignment="Center"
                                Margin="0,0,0,5">

                                  <CheckBox Content="Boolean All Targets"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                FontSize="13"
                                Style="{StaticResource GreenCheckMark}"
                                Margin="5,3"                                x:Name="BooleanAllTargets_CB"
                                Click="HandleAvoidOptionsSelection"
                                IsChecked="True"/>

                                  <CheckBox Content="Create Avoids For Multiple Targets"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                FontSize="13"
                                Style="{StaticResource GreenCheckMark}"
                                Margin="5,3"                                x:Name="MultipleAvoidTargets_CB"
                                Click="HandleAvoidOptionsSelection"
                                IsChecked="False"/>

                                </StackPanel>

                                <!--Multiple Targets-->
                                <StackPanel x:Name="MultipleAvoidTargets_SP"
                                Visibility="Collapsed">
                                  <!--Label-->
                                  <!--<TextBlock Text="Select the PTV(s) you'd like to crop your avoidance structures from:"
                                TextWrapping="Wrap"
                                FontSize="12"
                                FontStyle="Italic"
                                HorizontalAlignment="Center"
                                  />-->
                                  <!--Multiple Avoid Target Options-->
                                  <StackPanel x:Name="AvoidMultiTargetOptions_SP">
                                    <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center">
                                      <Label Content="# Targets To Create Unique Avoidance Structures For:"
                                  VerticalAlignment="Center"
                                  FontSize="14"
                                  />
                                    </StackPanel>
                                    <Label Content="_________________________________________________________________________________________________________________"
                                Margin="0,-20,0,0"
                                HorizontalAlignment="Center"
                                VerticalContentAlignment="Top"
                                FontSize="14"
                                />
                                    <!--Radios-->
                                    <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center">

                                      <RadioButton  x:Name="AvoidTarget1_Radio"
                                        GroupName="AvoidTargets"
                                        Content="1"
                                        Cursor="Hand"
                                        VerticalContentAlignment="Bottom"
                                        Margin="5"
                                        Checked="HandleAvoidTargetCount"/>
                                      <RadioButton  x:Name="AvoidTarget2_Radio"
                                        GroupName="AvoidTargets"
                                        Content="2"
                                        Cursor="Hand"
                                        VerticalContentAlignment="Bottom"
                                        Margin="5"
                                        Checked="HandleAvoidTargetCount"/>
                                      <RadioButton  x:Name="AvoidTarget3_Radio"
                                        GroupName="AvoidTargets"
                                        Content="3"
                                        Cursor="Hand"
                                        VerticalContentAlignment="Bottom"
                                        Margin="5"
                                        Checked="HandleAvoidTargetCount"/>
                                      <RadioButton  x:Name="AvoidTarget4_Radio"
                                        GroupName="AvoidTargets"
                                        Content="4"
                                        Cursor="Hand"
                                        VerticalContentAlignment="Bottom"
                                        Margin="5"
                                        Checked="HandleAvoidTargetCount"/>

                                    </StackPanel>

                                    <!--PTV : Dose Level Selectors-->
                                    <StackPanel Margin="0,10">

                                      <StackPanel Orientation="Horizontal"
                                      HorizontalAlignment="Center"
                                      Width="350"
                                      Margin="0,0,0,5"
                                      x:Name="AvoidTarget1_SP"
                                      Visibility="Collapsed">

                                        <Label Content="Av Target 1:"
                                    Width="85"
                                    FontSize="14"
                                    />

                                        <ComboBox x:Name="AvoidTarget1_Combo"
                                      Width="125"
                                      Background="#F5F7FA"
                                      HorizontalContentAlignment="Left"
                                      VerticalContentAlignment="Center"/>

                                        <Label Content="Crop Margin [mm]:"
                                Width="105"
                                FontSize="12"
                                />

                                        <TextBox Width="40"
                                  x:Name="AvoidTarget1CropMargin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="0,3"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"
                                  Text="2"/>

                                      </StackPanel>

                                      <StackPanel Orientation="Horizontal"
                                      HorizontalAlignment="Center"
                                      Width="350"
                                      Margin="0,0,0,5"
                                      x:Name="AvoidTarget2_SP"
                                      Visibility="Collapsed">

                                        <Label Content="Av Target 2:"
                                    Width="85"
                                    FontSize="14"
                                    />

                                        <ComboBox x:Name="AvoidTarget2_Combo"
                                      Width="125"
                                      Background="#F5F7FA"
                                      HorizontalContentAlignment="Left"
                                      VerticalContentAlignment="Center"/>

                                        <Label Content="Crop Margin [mm]:"
                                Width="105"
                                FontSize="12"
                                />

                                        <TextBox Width="40"
                                  x:Name="AvoidTarget2CropMargin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="0,3"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"
                                  Text="2"/>

                                      </StackPanel>

                                      <StackPanel Orientation="Horizontal"
                                      HorizontalAlignment="Center"
                                      Width="350"
                                      Margin="0,0,0,5"
                                      x:Name="AvoidTarget3_SP"
                                      Visibility="Collapsed">

                                        <Label Content="Av Target 3:"
                                    Width="85"
                                    FontSize="14"
                                    />

                                        <ComboBox x:Name="AvoidTarget3_Combo"
                                      Width="125"
                                      Background="#F5F7FA"
                                      HorizontalContentAlignment="Left"
                                      VerticalContentAlignment="Center"/>

                                        <Label Content="Crop Margin [mm]:"
                                Width="105"
                                FontSize="12"
                                />

                                        <TextBox Width="40"
                                  x:Name="AvoidTarget3CropMargin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="0,3"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"
                                  Text="2"/>

                                      </StackPanel>

                                      <StackPanel Orientation="Horizontal"
                                      HorizontalAlignment="Center"
                                      Width="350"
                                      Margin="0,0,0,5"
                                      x:Name="AvoidTarget4_SP"
                                      Visibility="Collapsed">

                                        <Label Content="Av Target 4:"
                                    Width="85"
                                    FontSize="14"
                                    />

                                        <ComboBox x:Name="AvoidTarget4_Combo"
                                      Width="125"
                                      Background="#F5F7FA"
                                      HorizontalContentAlignment="Left"
                                      VerticalContentAlignment="Center"/>

                                        <Label Content="Crop Margin [mm]:"
                                Width="105"
                                FontSize="12"
                                />

                                        <TextBox Width="40"
                                  x:Name="AvoidTarget4CropMargin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="0,3"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"
                                  Text="2"/>

                                      </StackPanel>

                                    </StackPanel>

                                  </StackPanel>

                                </StackPanel>

                              </StackPanel>

                              <!--Prefix-->
                              <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Width="275">
                                <Label Content="Preferred Prefix:"
                            Width="120"
                            FontSize="14"
                            />
                                <TextBox Width="40"
                              x:Name="AvoidPrefix_TextBox"
                              Background="#0A558C"
                            Foreground="White"
                              GotFocus="SelectAllText"
                              TextAlignment="Center"
                              VerticalContentAlignment="Center"
                              Margin="0,3"
                              FontSize="12"
                              Text="zav"/>
                                <TextBlock Text="(The default is 'zav')"
                                TextWrapping="Wrap"
                                FontSize="12"
                                FontStyle="Italic"
                                VerticalAlignment="Center"
                                Margin="5,0"
                                />
                              </StackPanel>


                              <!--Margin Options-->
                              <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">
                                <Label Content="Margin Options"
                              VerticalAlignment="Center"
                              FontSize="14"
                              />
                              </StackPanel>
                              <!--Divider-->
                              <Label Content="____________________________________________________________________________"
                            Margin="0,-20,0,0"
                            HorizontalAlignment="Center"
                            VerticalContentAlignment="Top"
                            FontSize="14"
                            />

                              <!--Grow Margin-->
                              <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Width="275">
                                <Label Content="OAR Margin [mm]:"
                            Width="120"
                            FontSize="14"
                            />
                                <TextBox Width="40"
                              x:Name="AvoidGrowMargin_TextBox"
                              Background="#0A558C"
                            Foreground="White"
                              GotFocus="SelectAllText"
                              TextAlignment="Center"
                              Margin="0,3"
                              FontSize="12"
                              VerticalContentAlignment="Center"
                              Text="2"/>
                                <TextBlock Text="(The default is 2mm)"
                                FontSize="12"
                                FontStyle="Italic"
                                VerticalAlignment="Center"
                                Margin="5,0"
                                />
                              </StackPanel>

                              <!--Crop Margin-->
                              <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Width="275"
                              x:Name="CropAvoidsFromPTVs"
                              Visibility="Visible">
                                <Label Content="From Target [mm]:"
                            Width="120"
                            FontSize="14"
                            />
                                <TextBox Width="40"
                              x:Name="AvoidCropMargin_TextBox"
                              Background="#0A558C"
                            Foreground="White"
                              GotFocus="SelectAllText"
                              TextAlignment="Center"
                              Margin="0,3"
                              FontSize="12"
                              VerticalContentAlignment="Center"
                              Text="2"/>
                                <TextBlock Text="(The default is 2mm)"
                                FontSize="12"
                                FontStyle="Italic"
                                VerticalAlignment="Center"
                                Margin="5,0"
                                />
                              </StackPanel>

                            </StackPanel>

                          </ScrollViewer>

                        </Grid>
                      </StackPanel>

                    </StackPanel>


                  </Border>

                  <!-- opti ptvs -->
                  <Border Padding="10"
                      CornerRadius="10"
                      BorderThickness="1"
                      BorderBrush="#003E6B"
                      Margin="0,0,5,0"
                      x:Name="OptiStructure_SP"
                      Visibility="Collapsed">
                    
                    <StackPanel Background="#E1E1E1">
                      <StackPanel Orientation="Horizontal"
                          Background="White"
                          Margin="0,5,0,5">
                        <StackPanel Width="350"
                            Margin="5,0">
                          <Label x:Name="OptiPTV_Label"
                        Content="Opti PTVs To Create"
                        HorizontalAlignment="Center" 
                        />
                          <TextBlock Text="Select the PTV(s) you'd like to create opti structures for:"
                            TextWrapping="Wrap"
                            FontSize="12"
                            FontStyle="Italic"
                            HorizontalAlignment="Center" 
                            />
                          <ListBox x:Name="PTVList_LV"
                            Margin="5"
                            Width="auto"
                            MinHeight="150" 
                                   MaxHeight="150"
                            SelectionMode="Multiple" 
                            ItemsSource="{Binding ptvListBoxItems}"
                            Height="auto" 
                            FontSize="13"
                            HorizontalContentAlignment="Center"
                            VerticalContentAlignment="Center"
                            BorderBrush="White">
                            <ListBox.Resources>
                              <Style TargetType="ListBoxItem">
                                <Setter Property="OverridesDefaultStyle" Value="true" />
                                <Setter Property="SnapsToDevicePixels" Value="true" />
                                <Setter Property="HorizontalAlignment" Value="Left" />
                                <Setter Property="Margin" Value="50,0,20,0" />
                                <Setter Property="Template">
                                  <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                      <CheckBox IsChecked="{Binding IsSelected}"
                                        Style="{StaticResource GreenCheckMark}"
                                        Margin="5,2"
                                                Width="150">
                                      <TextBlock Text="{Binding Id}"></TextBlock>
                                    </CheckBox>

                                    </ControlTemplate>
                                  </Setter.Value>
                                </Setter>
                              </Style>
                            </ListBox.Resources>
                          </ListBox>
                        </StackPanel>
                      </StackPanel>

                    
                    <StackPanel Orientation="Horizontal"
                      Background="White"
                      Margin="0,5,0,5">

                      <Grid>
                        <Grid.RowDefinitions>
                          <RowDefinition  />
                        </Grid.RowDefinitions>

                        <ScrollViewer CanContentScroll="True" MinHeight="400" MaxHeight="400" >

                          <StackPanel Width="350"
                            Margin="5,0">

                            <!--Label-->
                            <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center">
                              <Label Content="Options"
                              VerticalAlignment="Center"
                              FontSize="14"
                              />
                            </StackPanel>
                            <!--Divider-->
                            <Label Content="__________________________________________________________"
                              Margin="0,-20,0,0"
                              HorizontalAlignment="Center"
                              VerticalContentAlignment="Top"
                              FontSize="14"
                              />

                            <!--Preferred Prefix-->
                            <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Width="275">
                              <Label Content="Preferred Prefix:"
                                      Width="120"
                                      FontSize="14"/>
                              <TextBox Width="40"
                              x:Name="OptiPrefix_TextBox"
                              GotFocus="SelectAllText"
                              Background="#0A558C"
                            Foreground="White"
                              TextAlignment="Center"
                              Margin="0,3"
                              FontSize="12"
                              VerticalContentAlignment="Center"
                              Text="zopti"/>
                              <TextBlock Text="(The default is 'zopti')"
                                TextWrapping="Wrap"
                                FontSize="12"
                                FontStyle="Italic"
                                VerticalAlignment="Center"
                                Margin="5,0"/>
                            </StackPanel>

                            <!--PTV Margin-->
                            <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Width="275">
                              <Label Content="PTV Margin [mm]:"
                            Width="120"
                            FontSize="14"/>
                              <TextBox Width="40"
                              x:Name="OptiGrowMargin_TextBox"
                              Background="#0A558C"
                            Foreground="White"
                              GotFocus="SelectAllText"
                              TextAlignment="Center"
                              Margin="0,3"
                              FontSize="12"
                              VerticalContentAlignment="Center"
                              Text="1"/>
                              <TextBlock Text="(The default is 1mm)"
                                FontSize="12"
                                FontStyle="Italic"
                                VerticalAlignment="Center"
                                Margin="5,0"/>
                            </StackPanel>

                            <!--Option CheckBoxes-->
                            <StackPanel>

                              <!--Checkboxes-->
                              <StackPanel Orientation="Vertical"
                                HorizontalAlignment="Center"
                                Margin="0,5,0,5">

                                <CheckBox Content="Crop Outside Body"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                FontSize="13"
                                Style="{StaticResource GreenCheckMark}"
                                Margin="5,3"                                x:Name="CropFromBody_CB"
                                Click="HandleOptiOptionsSelection"/>

                                <CheckBox Content="Create PTV__Eval"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                FontSize="13"
                                Style="{StaticResource GreenCheckMark}"
                                Margin="5,3"                                x:Name="CreatePTVEval_CB"/>

                                <CheckBox Content="Create CI Structure"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                FontSize="13"
                                Style="{StaticResource GreenCheckMark}"
                                Margin="5,3"                                x:Name="CreateCI_CB"
                                Click="HandleOptiOptionsSelection"/>

                                <CheckBox Content="Create R50 Structure"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                FontSize="13"
                                Style="{StaticResource GreenCheckMark}"
                                Margin="5,3"                                x:Name="CreateR50_CB"
                                Click="HandleOptiOptionsSelection"/>

                                <CheckBox Content="Multiple Dose Levels"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                FontSize="13"
                                Style="{StaticResource GreenCheckMark}"
                                Margin="5,3"                                x:Name="MultipleDoseLevels_CB"
                                Click="HandleOptiOptionsSelection"/>

                                <!--<CheckBox Content="Opti GTV For Single Lesions"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                Background="#003E6B"
                                FontSize="12"
                                Margin="5,3"                                x:Name="CreateOptiGTV_CB"
                                Click="CreateOptiGTV_CB_Click"/>
                    
                      <CheckBox Content="Opti Total"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                Background="#003E6B"
                                FontSize="12"
                                Margin="5,3"                                x:Name="CreateOptiTotal_CB"
                                Click="CreateOptiTotal_CB_Click"/>-->

                              </StackPanel>

                            </StackPanel>
                            <!--Options Section-->
                            <StackPanel x:Name="OptiOptions_SP"
                              Visibility="Collapsed">

                              <!--Crop Options-->
                              <StackPanel x:Name="CropOptions_SP"
                                Visibility="Collapsed">
                                <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center">
                                  <Label Content="Crop Margins"
                                VerticalAlignment="Center"
                                FontSize="14"
                                />
                                </StackPanel>
                                <Label Content="____________________________________________________________________________"
                              Margin="0,-20,0,0"
                              HorizontalAlignment="Center"
                              VerticalContentAlignment="Top"
                              FontSize="14"
                              />
                                <!--Crop From Body Margin-->
                                <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center"
                                  Width="275"
                                  Visibility="Collapsed"
                                  x:Name="CropFromBody_SP">
                                  <Label Content="From Body [mm]:"
                                Width="120"
                                FontSize="14"
                                />
                                  <TextBox Width="40"
                                  x:Name="BodyCropMargin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="0,3"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"
                                  Text="4"/>
                                  <TextBlock Text="(The default is 4mm)"
                                    FontSize="12"
                                    FontStyle="Italic"
                                    VerticalAlignment="Center"
                                    Margin="5,0"
                                    />
                                </StackPanel>

                                <!--Crop From Optis Margin-->
                                <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center"
                                  Width="275"
                                  Visibility="Visible"
                                  x:Name="CropFromOptis_SP">
                                  <Label Content="From Optis [mm]:"
                                Width="120"
                                FontSize="14"
                                />
                                  <TextBox Width="40"
                                  x:Name="OptiCropMargin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="0,3"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"
                                  Text="2"/>
                                  <TextBlock Text="(The default is 2mm)"
                                    FontSize="12"
                                    FontStyle="Italic"
                                    VerticalAlignment="Center"
                                    Margin="5,0"
                                    />
                                  <!--Crop From Body Margin-->
                                </StackPanel>

                              </StackPanel>

                              <!--CI / R50 Structure Options-->
                              <StackPanel x:Name="CI_R50_SP"
                                Visibility="Collapsed">
                                <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center">
                                  <Label Content="CI / R50 Structure Margins"
                                VerticalAlignment="Center"
                                FontSize="14"
                                />
                                </StackPanel>
                                <Label Content="____________________________________________________________________________"
                              Margin="0,-20,0,0"
                              HorizontalAlignment="Center"
                              VerticalContentAlignment="Top"
                              FontSize="14"
                              />

                                <!--CI Margin-->
                                <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center"
                                  Width="275"
                                  Visibility="Collapsed"
                                  x:Name="CIMargin_SP">
                                  <Label Content="CI [mm]:"
                                Width="120"
                                FontSize="14"
                                />
                                  <TextBox Width="40"
                                  x:Name="CIMargin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="0,3"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"
                                  Text="5"/>
                                  <TextBlock Text="(The default is 5mm)"
                                    FontSize="12"
                                    FontStyle="Italic"
                                    VerticalAlignment="Center"
                                    Margin="5,0"
                                    />
                                </StackPanel>

                                <!--R50 Margin-->
                                <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center"
                                  Width="275"
                                  Visibility="Collapsed"
                                  x:Name="R50Margin_SP">
                                  <Label Content="R50 [mm]:"
                                Width="120"
                                FontSize="14"
                                />
                                  <TextBox Width="40"
                                  x:Name="R50Margin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="0,3"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"
                                  Text="30"/>
                                  <TextBlock Text="(The default is 30mm)"
                                    FontSize="12"
                                    FontStyle="Italic"
                                    VerticalAlignment="Center"
                                    Margin="5,0"
                                    />
                                </StackPanel>

                              </StackPanel>

                              <!--Multiple Dose Level Options-->
                              <StackPanel x:Name="MultiDoseLevelOptions_SP"
                                  Visibility="Collapsed">
                                <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center">
                                  <Label Content="Dose Levels"
                                VerticalAlignment="Center"
                                FontSize="14"
                                />
                                  <Label Content="(Lowest to Highest)"
                                VerticalAlignment="Center"
                                FontSize="12"
                                FontStyle="Italic"
                                />
                                </StackPanel>
                                <Label Content="____________________________________________________________________________"
                              Margin="0,-20,0,0"
                              HorizontalAlignment="Center"
                              VerticalContentAlignment="Top"
                              FontSize="14"
                              />
                                <!--Radios-->
                                <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center">

                                  <RadioButton  x:Name="DoseLevel1_Radio"
                                      GroupName="DoseLevels"
                                      Content="1"
                                      Cursor="Hand"
                                      VerticalContentAlignment="Bottom"
                                      Margin="5"
                                      Checked="HandleDoseLevelCount"/>
                                  <RadioButton  x:Name="DoseLevel2_Radio"
                                      GroupName="DoseLevels"
                                      Content="2"
                                      Cursor="Hand"
                                      VerticalContentAlignment="Bottom"
                                      Margin="5"
                                      Checked="HandleDoseLevelCount"/>
                                  <RadioButton  x:Name="DoseLevel3_Radio"
                                      GroupName="DoseLevels"
                                      Content="3"
                                      Cursor="Hand"
                                      VerticalContentAlignment="Bottom"
                                      Margin="5"
                                      Checked="HandleDoseLevelCount"/>
                                  <RadioButton  x:Name="DoseLevel4_Radio"
                                      GroupName="DoseLevels"
                                      Content="4"
                                      Cursor="Hand"
                                      VerticalContentAlignment="Bottom"
                                      Margin="5"
                                      Checked="HandleDoseLevelCount"/>

                                </StackPanel>

                                <!--PTV : Dose Level Selectors-->
                                <StackPanel Margin="0,10">

                                  <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Width="350"
                                    Margin="0,0,0,5"
                                    x:Name="DoseLevel1_SP"
                                    Visibility="Collapsed">

                                    <Label Content="Dose Level 1"
                                  Width="85"
                                  FontSize="14"
                                  />

                                    <ComboBox x:Name="DoseLevel1_Combo"
                                    Width="125"
                                    Background="#F5F7FA"
                                    HorizontalContentAlignment="Left"
                                    VerticalContentAlignment="Center"/>

                                    <StackPanel Orientation="Horizontal"
                                      x:Name="DoseLevel1CropMargin_SP">
                                      <Label Content="Crop Margin [mm]:"
                              Width="105"
                              FontSize="12"
                              />

                                      <TextBox Width="40"
                                x:Name="DoseLevel1CropMargin_TextBox"
                                Background="#0A558C"
                                Foreground="White"
                                GotFocus="SelectAllText"
                                TextAlignment="Center"
                                Margin="0,3"
                                FontSize="12"
                                VerticalContentAlignment="Center"
                                Text="2"/>
                                    </StackPanel>
                                  </StackPanel>

                                  <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Width="350"
                                    Margin="0,0,0,5"
                                    x:Name="DoseLevel2_SP"
                                    Visibility="Collapsed">

                                    <Label Content="Dose Level 2"
                                  Width="85"
                                  FontSize="14"
                                  />

                                    <ComboBox x:Name="DoseLevel2_Combo"
                                    Width="125"
                                    Background="#F5F7FA"
                                    HorizontalContentAlignment="Left"
                                    VerticalContentAlignment="Center"/>
                                    <StackPanel Orientation="Horizontal"
                                      x:Name="DoseLevel2CropMargin_SP">
                                      <Label Content="Crop Margin [mm]:"
                              Width="105"
                              FontSize="12"
                              />

                                      <TextBox Width="40"
                                x:Name="DoseLevel2CropMargin_TextBox"
                                Background="#0A558C"
                                Foreground="White"
                                GotFocus="SelectAllText"
                                TextAlignment="Center"
                                Margin="0,3"
                                FontSize="12"
                                VerticalContentAlignment="Center"
                                Text="2"/>
                                    </StackPanel>
                                  </StackPanel>

                                  <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Width="350"
                                    Margin="0,0,0,5"
                                    x:Name="DoseLevel3_SP"
                                    Visibility="Collapsed">

                                    <Label Content="Dose Level 3"
                                  Width="85"
                                  FontSize="14"
                                  />

                                    <ComboBox x:Name="DoseLevel3_Combo"
                                    Width="125"
                                    Background="#F5F7FA"
                                    HorizontalContentAlignment="Left"
                                    VerticalContentAlignment="Center"/>

                                    <StackPanel Orientation="Horizontal"
                                      x:Name="DoseLevel3CropMargin_SP">
                                      <Label Content="Crop Margin [mm]:"
                                Width="105"
                                FontSize="12"
                                />

                                      <TextBox Width="40"
                                  x:Name="DoseLevel3CropMargin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="0,3"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"
                                  Text="2"/>
                                    </StackPanel>
                                  </StackPanel>

                                  <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Width="350"
                                    Margin="0,0,0,5"
                                    x:Name="DoseLevel4_SP"
                                    Visibility="Collapsed">

                                    <Label Content="Dose Level 4"
                                  Width="85"
                                  FontSize="14"
                                  />

                                    <ComboBox x:Name="DoseLevel4_Combo"
                                    Width="125"
                                    Background="#F5F7FA"
                                    HorizontalContentAlignment="Left"
                                    VerticalContentAlignment="Center"/>

                                  </StackPanel>

                                </StackPanel>

                              </StackPanel>

                            </StackPanel>


                          </StackPanel>

                        </ScrollViewer>

                      </Grid>
                    </StackPanel>

                  </StackPanel>
                  </Border>

                  <!-- rings -->
                  <Border Padding="10"
                      CornerRadius="10"
                      BorderThickness="1"
                      BorderBrush="#003E6B"
                      Margin="0,0,5,0"
                      x:Name="RingStructure_SP"
                      Visibility="Collapsed">
                    <StackPanel Background="#E1E1E1">
                      <StackPanel Orientation="Horizontal"
                          Background="White"
                          Margin="0,5,0,5"
                                  >
                        <StackPanel Width="350"
                            Margin="5,0">
                          <Label x:Name="Ring_Label"
                          Content="PTVs To Create Rings For"
                          HorizontalAlignment="Center" 
                          />
                          <TextBlock Text="Select the PTV(s) you'd like to create ring structures for (not required)"
                              TextWrapping="Wrap"
                              FontSize="12"
                              FontStyle="Italic"
                              HorizontalAlignment="Center" 
                              />
                          <ListBox x:Name="PTVListForRings_LV"
                              Margin="5"
                              Width="auto"
                              MinHeight="150" 
                                   MaxHeight="150"
                              SelectionMode="Multiple"
                              ItemsSource="{Binding ringListBoxItems}"
                              Height="auto" 
                              FontSize="13"
                              HorizontalContentAlignment="Center"
                              VerticalContentAlignment="Center"
                              BorderBrush="White">
                            <ListBox.Resources>
                              <Style TargetType="ListBoxItem">
                                <Setter Property="OverridesDefaultStyle" Value="true" />
                                <Setter Property="SnapsToDevicePixels" Value="true" />
                                <Setter Property="HorizontalAlignment" Value="Left" />
                                <Setter Property="Margin" Value="50,0,20,0" />
                                <Setter Property="Template">
                                  <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                      <CheckBox IsChecked="{Binding IsSelected}"
                                        Style="{StaticResource GreenCheckMark}"
                                        Margin="5,2"
                                                Width="150">
                                      <TextBlock Text="{Binding Id}" />
                                    </CheckBox>

                                    </ControlTemplate>
                                  </Setter.Value>
                                </Setter>
                              </Style>
                            </ListBox.Resources>
                          </ListBox>

                        </StackPanel>
                      </StackPanel>
                      <StackPanel Orientation="Horizontal"
                          Background="White"
                              Margin="0,5,0,5"
                                  Height="400">
                        <StackPanel Width="350"
                            Margin="5,0">

                          <!--Label-->
                          <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center">
                            <Label Content="Options"
                              VerticalAlignment="Center"
                              FontSize="14"
                              />
                          </StackPanel>

                          <!--Divider-->
                          <Label Content="__________________________________________________________"
                              Margin="0,-20,0,0"
                              HorizontalAlignment="Center"
                              VerticalContentAlignment="Top"
                              FontSize="14"
                              />

                          <!--Preferred Prefix-->
                          <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Width="275">
                            <Label Content="Preferred Prefix:"
                          Width="120"
                          FontSize="14"/>
                            <TextBox Width="40"
                            x:Name="RingPrefix_TextBox"
                            Background="#0A558C"
                            Foreground="White"
                            GotFocus="SelectAllText"
                            TextAlignment="Center"
                            Margin="0,3"
                            FontSize="12"
                            VerticalContentAlignment="Center"
                            
                            Text="zring"/>
                            <TextBlock Text="(The default is 'zring #')"
                              TextWrapping="Wrap"
                              FontSize="12"
                              FontStyle="Italic"
                              VerticalAlignment="Center"
                              Margin="5,0"/>
                          </StackPanel>
                          <!--Number of Rings-->
                          <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Width="275">
                            <Label  Content="Number of Rings:"
                            Width="120"
                            FontSize="14"/>
                            <TextBox  Width="40"
                              x:Name="RingCount_TextBox"
                              Background="#0A558C"
                              Foreground="White"
                              TextAlignment="Center"
                              Margin="0,3"
                              FontSize="12"
                              VerticalContentAlignment="Center"
                              Text="3"/>
                            <TextBlock  Text="(The default is 3)"
                                FontSize="12"
                                FontStyle="Italic"
                                VerticalAlignment="Center"
                                Margin="5,0"/>
                          </StackPanel>
                          <!--Ring Margin-->
                          <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Width="275">
                            <Label Content="Ring Margin [mm]:"
                            Width="120"
                            FontSize="14"/>
                            <TextBox Width="40"
                        x:Name="RingGrowMargin_TextBox"
                        Background="#0A558C"
                        Foreground="White"
                        GotFocus="SelectAllText"
                        TextAlignment="Center"
                        Margin="0,3"
                        FontSize="12"
                        VerticalContentAlignment="Center"
                        Text="10"/>
                            <TextBlock Text="(The default is 10mm)"
                                FontSize="12"
                                FontStyle="Italic"
                                VerticalAlignment="Center"
                                Margin="5,0"/>
                          </StackPanel>


                          <!--Label-->
                          <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center"
                                  Margin="0,20,0,0">
                            <Label Content="Innermost Ring Crop Options"
                              VerticalAlignment="Center"
                              FontSize="14"
                              />
                          </StackPanel>
                          <!--Divider-->
                          <Label Content="__________________________________________________________"
                              Margin="0,-20,0,0"
                              HorizontalAlignment="Center"
                              VerticalContentAlignment="Top"
                              FontSize="14"
                              />

                          <!--Ring Margin-->
                          <StackPanel>

                            <StackPanel Orientation="Horizontal"
                              HorizontalAlignment="Center"
                              Width="275">
                              <Label Content="From Target [mm]:"
                            Width="120"
                            FontSize="14"/>
                              <TextBox Width="40"
                        x:Name="RingCropMargin_TextBox"
                        Background="#0A558C"
                        Foreground="White"
                        GotFocus="SelectAllText"
                        TextAlignment="Center"
                        Margin="0,3"
                        FontSize="12"
                        VerticalContentAlignment="Center"
                        Text="0"/>
                              <TextBlock Text="(The default is 0mm)"
                                FontSize="12"
                                FontStyle="Italic"
                                VerticalAlignment="Center"
                                Margin="5,0"/>
                            </StackPanel>
                          </StackPanel>

                        <StackPanel Orientation="Vertical"
                                HorizontalAlignment="Center"
                                Margin="0,5,0,5">

                          <CheckBox Content="Crop Outside Body"
                                VerticalAlignment="Center"
                                VerticalContentAlignment="Bottom"
                                HorizontalAlignment="Left"
                                HorizontalContentAlignment="Left"
                                FontSize="13"
                                Style="{StaticResource GreenCheckMark}"
                                Margin="5,3"                                x:Name="CropRingsFromBody_CB"
                                IsChecked="True"/>

                        </StackPanel>

                      </StackPanel>
                      </StackPanel>
                    </StackPanel>
                  </Border>

                  <!-- boolean tool -->
                  <Border Padding="10"
                      CornerRadius="10"
                      BorderThickness="1"
                      BorderBrush="#003E6B"
                      x:Name="BooleanedStructure_SP"
                      Visibility="Collapsed">
                    <StackPanel Background="#E1E1E1">
                      <StackPanel Orientation="Horizontal"
                          Background="White"
                          Margin="0,5,0,5">
                        <StackPanel Width="350"
                            Margin="5,0"
                            Height="202">

                          <!--New Structure Id-->
                          <Label Content="Basic Boolean Operations Tool"
                          HorizontalAlignment="Center"/>

                        <StackPanel>

                            <StackPanel Orientation="Horizontal"
                                    Margin="0,5,0,-20"
                                    HorizontalAlignment="Center">

                              <Label Content="Structure Id"
                                  Width="100" 
                                  HorizontalContentAlignment="Center"/>
                              <Label Content="Base Structure"
                                  Width="100" 
                                  Margin="15,0"
                                  HorizontalContentAlignment="Center"/>
                              <Label Content="Operation"
                                  Width="100" 
                                  Margin="0"
                                  HorizontalContentAlignment="Center"/>

                            </StackPanel>

                            <StackPanel Orientation="Horizontal"
                                    VerticalAlignment="Top"
                                    Margin="0,0,0,5"
                                    HorizontalAlignment="Center">

                              <Label Content="_____________________________"
                                  Width="100" 
                                  VerticalAlignment="Top"
                                  HorizontalContentAlignment="Center"/>
                              <Label Content="_____________________________"
                                  Width="100" 
                                  Margin="15,0"
                                  VerticalAlignment="Top"
                                  HorizontalContentAlignment="Center"/>
                              <Label Content="_____________________________"
                                  Width="100" 
                                  Margin="0,0,0,0"
                                  VerticalAlignment="Top"
                                  HorizontalContentAlignment="Center"/>

                            </StackPanel>

                            <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="5">

                              <TextBox Text=""
                                  Width="100"
                                    Height="25"
                                  x:Name="BoolStructId_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  FontSize="12"
                                  VerticalContentAlignment="Center"/>
                              <ComboBox x:Name="BoolBaseStruct_Combo"
                                    Width="100"
                                    Margin="15,0"
                                    Height="25"
                                    FontSize="12"
                                    Background="#F5F7FA"
                                    HorizontalContentAlignment="Left"
                                    VerticalContentAlignment="Center"/>
                              <StackPanel Orientation="Horizontal"
                                      Width="100"
                                      Margin="0"
                                      HorizontalAlignment="Center">

                                <CheckBox Content="+"
                                      VerticalAlignment="Center"
                                      HorizontalContentAlignment="Center"
                                      HorizontalAlignment="Center"
                                      Margin="12,0"
                                      VerticalContentAlignment="Bottom"
                                      x:Name="BoolOperationAdd_CB"
                                      Click="BoolOperationAdd_CB_Click"
                                      Style="{StaticResource GreenCheckMark}"
                                      IsChecked="True"/>
                                <CheckBox Content="-"
                                      VerticalAlignment="Center"
                                      HorizontalContentAlignment="Center"
                                      HorizontalAlignment="Center"
                                      Margin="5,0"
                                      VerticalContentAlignment="Bottom"
                                      x:Name="BoolOperationSubtract_CB"
                                      Click="BoolOperationSubtract_CB_Click"
                                      Style="{StaticResource GreenCheckMark}"
                                      IsChecked="False"/>

                              </StackPanel>


                            </StackPanel>

                          <!--margin options-->

                          <!--Label-->
                          <StackPanel Orientation="Horizontal"
                                  HorizontalAlignment="Center"
                                  Margin="0,5,0,0"
                                      >
                            <Label Content="Margin Options"
                              VerticalAlignment="Center"
                              FontSize="14"
                              />
                          </StackPanel>
                          <!--Divider-->
                          <Label Content="__________________________________________________________"
                              Margin="0,-20,0,0"
                              HorizontalAlignment="Center"
                              VerticalContentAlignment="Top"
                              FontSize="14"
                              />
                          <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                            <CheckBox Content="Create w/ Margin"
                                      Margin="-13, 0, 0, 5"
                                      VerticalAlignment="Center"
                                      HorizontalContentAlignment="Center"
                                      HorizontalAlignment="Center"
                                      VerticalContentAlignment="Bottom"
                                      x:Name="CreateBooleanWitMargin_CB"
                                      Click="CreateBooleanWitMargin_CB_Click"
                                      Style="{StaticResource GreenCheckMark}"
                                      IsChecked="False"/>
                          </StackPanel>


                          <StackPanel Orientation="Horizontal" 
                                      HorizontalAlignment="Center"
                                      x:Name="BooleanedMarginOptions_SP"
                                      Visibility="Collapsed">
                            
                            <CheckBox Content="Outer"
                                      VerticalAlignment="Center"
                                      HorizontalContentAlignment="Center"
                                      HorizontalAlignment="Center"
                                      Margin="5,0"
                                      VerticalContentAlignment="Bottom"
                                      x:Name="OuterMargin_CB"
                                      Click="OuterMargin_CB_Click"
                                      Style="{StaticResource GreenCheckMark}"
                                      IsChecked="True"/>

                            <CheckBox Content="Inner"
                                      VerticalAlignment="Center"
                                      HorizontalContentAlignment="Center"
                                      HorizontalAlignment="Center"
                                      Margin="5,0"
                                      VerticalContentAlignment="Bottom"
                                      x:Name="InnerMargin_CB"
                                      Click="InnerMargin_CB_Click"
                                      Style="{StaticResource GreenCheckMark}"
                                      IsChecked="False"/>


                            <TextBox Width="40"
                                  x:Name="BooleanMargin_TextBox"
                                  Background="#0A558C"
                                  Foreground="White"
                                  GotFocus="SelectAllText"
                                  TextAlignment="Center"
                                  Margin="15,0,0,0"
                                  FontSize="12"
                                     Height="22"
                                  VerticalContentAlignment="Center"
                                  Text="0"/>

                            <TextBlock Text="mm (The default is 0mm)"
                                FontSize="12"
                                FontStyle="Italic"
                                VerticalAlignment="Center"
                                Margin="5,0"/>

                          </StackPanel>

                        </StackPanel>
                          <!--base structure-->

                        </StackPanel>
                      </StackPanel>

                      <StackPanel Orientation="Horizontal"
                          Background="White"
                          Margin="0,5,0,5">
                        <StackPanel Width="350"
                                    Margin="5,0">

                          <!--structure list-->
                          <Label x:Name="Boolean_Label"
                          Content="Available Structures"
                          HorizontalAlignment="Center"/>
                          <TextBlock Text="Select the Structures(s) to add or subtract from the base structure"
                              TextWrapping="Wrap"
                              FontSize="12"
                              FontStyle="Italic"
                              HorizontalAlignment="Center"/>
                          <ListBox x:Name="StructureListForBooleanOperations_LV"
                              Margin="5"
                              Width="auto"
                              MinHeight="100" 
                              MaxHeight="300"
                              SelectionMode="Multiple"
                              ItemsSource="{Binding booleanListBoxItems}"
                              Height="auto" 
                              FontSize="13"
                              HorizontalContentAlignment="Center"
                              VerticalContentAlignment="Center"
                              BorderBrush="White">
                            <ListBox.Resources>
                              <Style TargetType="ListBoxItem">
                                <Setter Property="OverridesDefaultStyle" Value="true" />
                                <Setter Property="SnapsToDevicePixels" Value="true" />
                                <Setter Property="HorizontalAlignment" Value="Left" />
                                <Setter Property="Margin" Value="50,0,20,0" />
                                
                                <Setter Property="Template">
                                  <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                      <CheckBox IsChecked="{Binding IsSelected}"
                                        Style="{StaticResource GreenCheckMark}"
                                        Margin="5,2"
                                                Width="150">
                                      <TextBlock Text="{Binding Id}" />
                                    </CheckBox>

                                  </ControlTemplate>
                                  </Setter.Value>
                                </Setter>
                              </Style>
                            </ListBox.Resources>
                          </ListBox>

                        </StackPanel>
                      </StackPanel>

                      <StackPanel Orientation="Horizontal"
                              Margin="0,5,0,5">
                        <StackPanel Width="350"
                            Margin="5,0">

                          <Button x:Name="CreateBooleanedStructures_Btn"
                              Click="CreateBooleanedStructure_Btn_Click"
                              Content="Add Booleaned Structure"
                              FontSize="14"
                              Width="250"
                              Padding="5"
                              Margin="5"
                              Style="{StaticResource BlueRoundButtonTemplate}"
                              VerticalContentAlignment="Center"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Center"
                              Cursor="Hand"/>

                        </StackPanel>
                      </StackPanel>
                    </StackPanel>
                  </Border>

                  <!--overlap tool-->
                <Border Padding="10"
                      CornerRadius="10"
                      BorderThickness="1"
                      BorderBrush="#003E6B"
                      x:Name="ApproximateOverlap_SP"
                      Visibility="Collapsed">
                  <StackPanel Background="#E1E1E1">
                    <StackPanel Orientation="Horizontal"
                          Background="White"
                          Margin="0,5,0,5">
                      <StackPanel Width="350"
                            Margin="5,0"
                            Height="202">

                        <!--New Structure Id-->
                        <Label Content="Fast Overlap Approximation Tool"
                          HorizontalAlignment="Center"/>


                        <StackPanel>

                          <StackPanel Orientation="Horizontal"
                                    Margin="0,5,0,-20"
                                    HorizontalAlignment="Center">

                            <Label Content="Structure 1"
                                  Width="100" 
                                   Margin="0,0,15,0"
                                  HorizontalContentAlignment="Center"/>
                            <Label Content="Structure 2"
                                  Width="100" 
                                  Margin="15,0,0,0"
                                  HorizontalContentAlignment="Center"/>

                          </StackPanel>
                          

                          <StackPanel Orientation="Horizontal"
                                    VerticalAlignment="Top"
                                    Margin="0,0,0,5"
                                    HorizontalAlignment="Center">

                            <Label Content="_____________________________"
                                  Width="100" 
                                   Margin="0,0,15,0"
                                  VerticalAlignment="Top"
                                  HorizontalContentAlignment="Center"/>
                            <Label Content="_____________________________"
                                  Width="100" 
                                  Margin="15,0,0,0"
                                  VerticalAlignment="Top"
                                  HorizontalContentAlignment="Center"/>

                          </StackPanel>

                          <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="5">

                            <ComboBox x:Name="OverlapStructure1_Combo"
                                    Width="100"
                                    Margin="15,0"
                                    Height="25"
                                    FontSize="12"
                                    Background="#F5F7FA"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center"/>
                            <ComboBox x:Name="OverlapStructure2_Combo"
                                    Width="100"
                                    Margin="15,0"
                                    Height="25"
                                    FontSize="12"
                                    Background="#F5F7FA"
                                    HorizontalContentAlignment="Center"
                                    VerticalContentAlignment="Center"/>

                          </StackPanel>


                          <StackPanel Orientation="Horizontal"
                                    Margin="0,5,0,-20"
                                    HorizontalAlignment="Center">

                            <Label Content="Overlap [cc]"
                                  Width="100" 
                                  Margin="0"
                                  HorizontalContentAlignment="Center"/>
                            <Label Content="S1 [%]"
                                  Width="100" 
                                  Margin="0"
                                  HorizontalContentAlignment="Center"/>
                            <Label Content="S2 [%]"
                                  Width="100" 
                                  Margin="0"
                                  HorizontalContentAlignment="Center"/>

                          </StackPanel>


                          <StackPanel Orientation="Horizontal"
                                    VerticalAlignment="Top"
                                    Margin="0,0,0,5"
                                    HorizontalAlignment="Center">

                            
                            <Label Content="_____________________________"
                                  Width="100" 
                                  Margin="0"
                                  VerticalAlignment="Top"
                                  HorizontalContentAlignment="Center"/>
                            <Label Content="_____________________________"
                                  Width="80" 
                                  Margin="10,0"
                                  VerticalAlignment="Top"
                                  HorizontalContentAlignment="Center"/>
                            <Label Content="_____________________________"
                                  Width="80" 
                                  Margin="10, 0"
                                  VerticalAlignment="Top"
                                  HorizontalContentAlignment="Center"/>

                          </StackPanel>

                          <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="5">

                            <StackPanel Orientation="Horizontal"
                                      Margin="0"
                                      HorizontalAlignment="Center">

                              <Label Content=""
                                  Width="100" 
                                  Margin="0"
                                  HorizontalContentAlignment="Center"
                                     x:Name="VolumeOverlapCC_Label"/>
                              <Label Content=""
                                  Width="100" 
                                  Margin="0"
                                  HorizontalContentAlignment="Center"
                                     x:Name="PctStructure1_Label"/>
                              <Label Content=""
                                  Width="100" 
                                  Margin="0"
                                  HorizontalContentAlignment="Center"
                                     x:Name="PctStructure2_Label"/>

                            </StackPanel>


                          </StackPanel>

                        </StackPanel>
                        <!--base structure-->

                      </StackPanel>
                    </StackPanel>


                    <StackPanel Orientation="Horizontal"
                              Margin="0,5,0,5">
                      <StackPanel Width="350"
                            Margin="5,0">

                        <Button x:Name="ApproximateOverlap_Btn"
                              Click="ApproximateOverlap_Btn_Click"
                              Content="Approximate Overlap"
                              FontSize="14"
                              Width="250"
                              Padding="5"
                              Margin="5"
                              Style="{StaticResource BlueRoundButtonTemplate}"
                              VerticalContentAlignment="Center"
                              VerticalAlignment="Center"
                              HorizontalAlignment="Center"
                              Cursor="Hand"/>

                      </StackPanel>
                    </StackPanel>
                  </StackPanel>
                </Border>


              </StackPanel>

              </StackPanel>

              <!--Create Structures Button-->
              <StackPanel Orientation="Horizontal"
                      HorizontalAlignment="Center">
                <Button x:Name="CreateStructures_Btn"
                    Click="CreateStructures_Btn_Click"
                    Content="Create Structure(s)"
                    FontSize="14"
                    Width="450"
                    Padding="5"
                    Margin="0,0,0,15"
                    Style="{StaticResource BlueRoundButtonTemplate}"
                    VerticalContentAlignment="Center"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Cursor="Hand"/>

              </StackPanel>

              <!-- Instructions -->
              <Border Padding="5"
                      CornerRadius="10"
                      BorderThickness="1"
                      BorderBrush="#003E6B"
                      Margin="0,0,0,10"
                  HorizontalAlignment="Center"
                      x:Name="Instructions_SP"
                      Visibility="Collapsed">

                <StackPanel Orientation="Vertical"
                      VerticalAlignment="Center"
                      Margin="5"
                      Width="600"
                      Background="White">
                  <Label Content="Instructions"
                    HorizontalAlignment="Center"
                    FontSize="15"/>
                  <!--Divider-->
                <Label Content="__________________________________________________________"
                              Margin="0,-20,0,5"
                              HorizontalAlignment="Center"
                              VerticalContentAlignment="Top"
                              FontSize="14"
                              />
                <TextBlock  Text="1. Select the types of structures you would like to create."
                        TextWrapping="WrapWithOverflow"
                        Margin="5"
                        FontSize="13"/>
                  <TextBlock Text="2. Select the OAR(s)/PTV(s) you want structures created for."
                        TextWrapping="WrapWithOverflow"
                        Margin="5"
                        FontSize="13"/>
                  <TextBlock Text="3. Define your desired Prefix, OAR or PTV Margin (Grow/Shrink : +/-), and Crop Margin."
                        TextWrapping="WrapWithOverflow"
                        Margin="5"
                        FontSize="13"/>
                  <TextBlock Text='4. Click the "Create Structure(s)" Button.'
                        TextWrapping="WrapWithOverflow"
                        Margin="5,5"
                        FontSize="13"/>
                <TextBlock Text='Notes:'
                        TextWrapping="WrapWithOverflow"
                        Margin="5,5"
                        FontSize="13"/>
                <TextBlock Text=' - The "Booleaned Structures" tool may be used to create new structures using basic add and subtract boolean operations. These are created one at a time at the click of  the "Add Booleaned Structure" button'
                        TextWrapping="WrapWithOverflow"
                        Margin="5,5"
                        FontSize="13"/>
                <TextBlock Text=' - The "Approximate Overlap" tool uses boolean operations to calculate the volume and percentage overlap between two structures. Simply select two structures and click the "Approximate Overlap" button'
                        TextWrapping="WrapWithOverflow"
                        Margin="5,5"
                        FontSize="13"/>
              </StackPanel>

              </Border>
            </StackPanel>

          </ScrollViewer>

        </StackPanel>
    </Grid>
  </Border>

  


</UserControl>


